{
  if (createdFigure != null) {
switch (evt.getClickCount()) {
case 1:
      if (createdFigure.getNodeCount() > 2) {
        Rectangle r=new Rectangle(getView().drawingToView(createdFigure.getStartPoint()));
        r.grow(2,2);
        if (r.contains(evt.getX(),evt.getY())) {
          createdFigure.setClosed(true);
          finishCreation(createdFigure);
          getDrawing().fireUndoableEditHappened(creationEdit);
          createdFigure=null;
          fireToolDone();
        }
      }
    break;
case 2:
  finishWhenMouseReleased=null;
finishCreation(createdFigure);
getDrawing().fireUndoableEditHappened(creationEdit);
createdFigure=null;
fireToolDone();
break;
}
}
}
