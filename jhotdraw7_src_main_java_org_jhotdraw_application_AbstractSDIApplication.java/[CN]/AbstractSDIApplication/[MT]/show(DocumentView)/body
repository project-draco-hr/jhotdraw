{
  final ResourceMap labels=getFrameworkResourceMap();
  updateName(p);
  final JFrame f=new JFrame();
  f.setTitle(labels.getString("SDIWindow.Frame.title",p.getName()));
  f.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
  JPanel panel=(JPanel)wrapProjectComponent(p);
  f.add(panel);
  f.setMinimumSize(new Dimension(200,200));
  f.setPreferredSize(new Dimension(600,400));
  f.setJMenuBar(createMenuBar(p,(java.util.List<Action>)panel.getClientProperty("toolBarActions")));
  Preferences prefs=Preferences.userNodeForPackage(getClass());
  PreferencesUtil.installFramePrefsHandler(prefs,"documentView",f);
  Point loc=f.getLocation();
  boolean moved;
  do {
    moved=false;
    for (Iterator i=getViews().iterator(); i.hasNext(); ) {
      DocumentView aProject=(DocumentView)i.next();
      if (aProject != p && SwingUtilities.getWindowAncestor(aProject.getComponent()) != null && SwingUtilities.getWindowAncestor(aProject.getComponent()).getLocation().equals(loc)) {
        loc.x+=22;
        loc.y+=22;
        moved=true;
        break;
      }
    }
  }
 while (moved);
  f.setLocation(loc);
  f.addWindowListener(new WindowAdapter(){
    public void windowClosing(    final WindowEvent evt){
      setCurrentView(p);
      getAction(CloseAction.ID).actionPerformed(new ActionEvent(f,ActionEvent.ACTION_PERFORMED,"windowClosing"));
    }
    public void windowActivated(    WindowEvent e){
      setCurrentView(p);
    }
  }
);
  p.addPropertyChangeListener(new PropertyChangeListener(){
    public void propertyChange(    PropertyChangeEvent evt){
      String name=evt.getPropertyName();
      if (name.equals("modified") || name.equals("name")) {
        f.setTitle(labels.getString((p.isModified()) ? "SDIWindow.Frame.modifiedTitle" : "SDIWindow.Frame.title",p.getName()));
      }
 else       if (name.equals("file")) {
        updateName(p);
      }
    }
  }
);
  f.setVisible(true);
}
