{
  String propertyName=e.getPropertyName();
  Task task=(Task)(e.getSource());
  Object newValue=e.getNewValue();
  if ((task != null) && (task == getForegroundTask())) {
    firePropertyChange(e);
    if ("state".equals(propertyName)) {
      StateValue newState=(StateValue)(e.getNewValue());
switch (newState) {
case PENDING:
        fireStateChange(task,"pending");
      break;
case STARTED:
    fireStateChange(task,"started");
  break;
case DONE:
fireStateChange(task,"done");
setForegroundTask(null);
}
}
}
}
