{
  LinkedList<Figure> contained=new LinkedList<Figure>();
  for (  Figure f : getChildren()) {
    Rectangle2D r=f.getBounds();
    if (AttributeKeys.TRANSFORM.get(f) != null) {
      r=AttributeKeys.TRANSFORM.get(f).createTransformedShape(r).getBounds2D();
    }
    if (f.isVisible() && bounds.contains(r)) {
      contained.add(f);
    }
  }
  return contained;
}
