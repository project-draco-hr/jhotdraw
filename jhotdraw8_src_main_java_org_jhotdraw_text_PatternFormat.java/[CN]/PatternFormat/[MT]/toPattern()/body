{
  int lastOffset=0;
  StringBuilder result=new StringBuilder();
  for (int i=0; i <= maxOffset; ++i) {
    copyAndFixQuotes(pattern,lastOffset,offsets[i],result);
    lastOffset=offsets[i];
    result.append('{').append(argumentNumbers[i]);
    Format fmt=formats[i];
    if (fmt == null) {
    }
 else {
      result.append(fmt.toString());
    }
    result.append('}');
  }
  copyAndFixQuotes(pattern,lastOffset,pattern.length(),result);
  return result.toString();
}
