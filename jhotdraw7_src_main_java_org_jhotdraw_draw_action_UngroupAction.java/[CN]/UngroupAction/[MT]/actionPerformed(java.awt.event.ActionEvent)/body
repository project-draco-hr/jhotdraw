{
  if (canUngroup()) {
    final DrawingView view=getView();
    final CompositeFigure group=(CompositeFigure)getView().getSelectedFigures().iterator().next();
    final LinkedList<Figure> ungroupedFigures=new LinkedList<Figure>();
    CompositeEdit edit=new CompositeEdit(labels.getString("selectionUngroup")){
      public void redo() throws CannotRedoException {
        super.redo();
        ungroupFigures(view,group);
      }
      public void undo() throws CannotUndoException {
        groupFigures(view,group,ungroupedFigures);
        super.undo();
      }
    }
;
    fireUndoableEditHappened(edit);
    ungroupedFigures.addAll(ungroupFigures(view,group));
    fireUndoableEditHappened(edit);
  }
}
