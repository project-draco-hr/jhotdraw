{
  if (fFigures.contains(figure)) {
    if (layerNr >= fFigures.size()) {
      System.out.println("original layerNr: " + layerNr);
      layerNr=fFigures.size() - 1;
    }
    Figure layerFigure=getFigureFromLayer(layerNr);
    int layerFigureZValue=layerFigure.getZValue();
    int figureLayer=getLayer(figure);
    System.out.println("figureLayer: " + figureLayer + " layerNr: "+ layerNr);
    if (figureLayer < layerNr) {
      assignFiguresToPredecessorZValue(figureLayer + 1,layerNr);
    }
 else     if (figureLayer > layerNr) {
      assignFiguresToSuccessorZValue(layerNr,figureLayer - 1);
    }
    fFigures.removeElement(figure);
    fFigures.insertElementAt(figure,layerNr);
    figure.setZValue(layerFigureZValue);
    figure.changed();
    System.out.println("figureLayer(2): " + figure.getZValue());
  }
}
