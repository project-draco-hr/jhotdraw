{
  if (getAddedFigure() != null) {
    if (getCreatedFigure().isEmpty()) {
      drawing().remove(getAddedFigure());
      setUndoActivity(null);
    }
 else {
      setUndoActivity(createUndoActivity());
      getUndoActivity().setAffectedFigures(new SingleFigureEnumerator(getAddedFigure()));
    }
    setAddedFigure(null);
  }
  setCreatedFigure(null);
  editor().toolDone();
}
