{
  final Point2D from;
  final Figure targetFigure=connection.get(targetFigureKey);
  final Figure fromFigure=connection.get(fromFigureKey);
  if (fromFigure != null) {
    final Bounds b=fromFigure.getBoundsInDrawing();
    from=new Point2D(b.getMinX() + b.getWidth() / 2.0,(b.getMinY() + b.getHeight() / 2.0));
  }
 else {
    from=connection.get(ConnectionFigure.END);
  }
  Point2D target=chop(targetFigure,from);
  connection.set(targetKey,target);
}
