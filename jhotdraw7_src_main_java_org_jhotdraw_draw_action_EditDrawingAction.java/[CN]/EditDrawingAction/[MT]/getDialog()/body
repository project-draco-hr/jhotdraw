{
  if (dialog == null) {
    ResourceBundleUtil labels=ResourceBundleUtil.getLAFBundle("org.jhotdraw.draw.Labels");
    dialog=new JDialog();
    dialog.setTitle(labels.getString("drawingSettings"));
    dialog.setResizable(false);
    settingsPanel=new EditDrawingPanel();
    dialog.add(settingsPanel);
    dialog.pack();
    Preferences prefs=Preferences.userNodeForPackage(getClass());
    PreferencesUtil.installFramePrefsHandler(prefs,"drawingSettings",dialog);
    getApplication().addWindow(dialog,null);
  }
  settingsPanel.setDrawing(getView().getDrawing());
  return dialog;
}
