{
  if (getFileChooser().showOpenDialog(getView().getComponent()) == JFileChooser.APPROVE_OPTION) {
    final File file=getFileChooser().getSelectedFile();
    new Worker(){
      public Object construct(){
        try {
          ((ImageHolderFigure)createdFigure).loadImage(file);
        }
 catch (        Throwable t) {
          return t;
        }
        return null;
      }
      public void finished(      Object value){
        if (value instanceof Throwable) {
          Throwable t=(Throwable)value;
          JOptionPane.showMessageDialog(getView().getComponent(),t.getMessage(),null,JOptionPane.ERROR_MESSAGE);
          getDrawing().remove(createdFigure);
        }
 else {
          BufferedImage img=((ImageHolderFigure)createdFigure).getBufferedImage();
          if (img != null) {
            Point2D.Double p1=createdFigure.getStartPoint();
            Point2D.Double p2=new Point2D.Double(p1.x + img.getWidth(),p1.y + img.getHeight());
            createdFigure.willChange();
            createdFigure.setBounds(p1,p2);
            createdFigure.changed();
          }
        }
        if (isToolDoneAfterCreation()) {
          fireToolDone();
        }
      }
    }
.start();
  }
 else {
    getDrawing().remove(createdFigure);
    if (isToolDoneAfterCreation()) {
      fireToolDone();
    }
  }
}
