{
  if (isUpdatingField++ == 0) {
    Double fieldValue;
    try {
      fieldValue=(Double)getFormatter().stringToValue(getText());
    }
 catch (    NullPointerException ex) {
      fieldValue=null;
    }
catch (    ParseException ex) {
      fieldValue=null;
    }
    if (fieldValue != null) {
      fieldValue=Math.min(Math.max(min,fieldValue),max) / scaleFactor;
      if (!eventHandler.getCurrentSelection().isEmpty() && attributeKey != null) {
        for (        Figure f : eventHandler.getCurrentSelection()) {
          attributeKey.set(f,fieldValue);
        }
      }
      eventHandler.getEditor().setDefaultAttribute(attributeKey,fieldValue);
    }
  }
  isUpdatingField--;
}
