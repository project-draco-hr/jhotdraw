{
  Point2D newPoint=view.viewToDrawing(new Point2D(event.getX(),event.getY()));
  if (!event.isAltDown() && !event.isControlDown()) {
    newPoint=view.getConstrainer().constrainPoint(getOwner(),newPoint);
  }
  Figure o=getOwner();
  Connector newConnector=null;
  Figure newConnectedFigure=null;
  if (!event.isMetaDown()) {
    List<Figure> list=view.findFigures(newPoint,true);
    for (    Figure ff : list) {
      newConnector=ff.findConnector(newPoint,o);
      if (newConnector != null) {
        newConnectedFigure=ff;
        break;
      }
    }
  }
  DrawingModel model=view.getModel();
  model.set(o,pointKey,getOwner().drawingToLocal(newPoint));
  Figure oldConnectedFigure=model.set(o,figureKey,newConnectedFigure);
  model.set(o,connectorKey,newConnector);
  if (oldConnectedFigure != null) {
    model.fire(DrawingModelEvent.nodeInvalidated(model,oldConnectedFigure));
  }
  if (newConnectedFigure != null) {
    model.fire(DrawingModelEvent.nodeInvalidated(model,newConnectedFigure));
  }
  model.layout(o);
}
