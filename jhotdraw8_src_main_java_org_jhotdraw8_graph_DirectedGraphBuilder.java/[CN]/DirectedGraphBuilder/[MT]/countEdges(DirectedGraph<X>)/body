{
  if (graph instanceof IntDirectedGraph) {
    return IntDirectedGraphBuilder.countEdges((IntDirectedGraph)graph);
  }
  int edgeCount;
  if (graph instanceof GraphWithKnownEdgeCount) {
    edgeCount=((GraphWithKnownEdgeCount)graph).getEdgeCount();
  }
 else {
    edgeCount=0;
    for (int i=0, n=graph.getVertexCount(); i < n; i++) {
      X v=graph.getVertex(i);
      edgeCount+=graph.getNextCount(v);
    }
  }
  return edgeCount;
}
