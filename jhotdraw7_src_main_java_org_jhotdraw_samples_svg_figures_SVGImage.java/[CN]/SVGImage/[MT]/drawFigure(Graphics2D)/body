{
  super.drawFigure(g);
  BufferedImage image=getBufferedImage();
  if (image != null) {
    if (TRANSFORM.get(this) != null) {
      Graphics2D gx=(Graphics2D)g.create();
      gx.transform(TRANSFORM.get(this));
      gx.drawImage(image,(int)rect.x,(int)rect.y,(int)rect.width,(int)rect.height,null);
      gx.dispose();
    }
 else {
      g.drawImage(image,(int)rect.x,(int)rect.y,(int)rect.width,(int)rect.height,null);
    }
  }
 else {
    Shape shape=getTransformedShape();
    g.setColor(Color.red);
    g.draw(shape);
  }
}
