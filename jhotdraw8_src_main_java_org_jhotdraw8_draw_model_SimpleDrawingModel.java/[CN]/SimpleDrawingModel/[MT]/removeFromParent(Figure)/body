{
  Drawing oldDrawing=child.getDrawing();
  Figure parent=child.getParent();
  if (parent != null) {
    int index=parent.getChildren().indexOf(child);
    if (index != -1) {
      parent.getChildren().remove(index);
      fireTreeModelEvent(TreeModelEvent.nodeRemovedFromParent((DrawingModel)this,child,parent,index));
      fireTreeModelEvent(TreeModelEvent.nodeInvalidated((DrawingModel)this,parent));
    }
  }
  Drawing newDrawing=child.getDrawing();
  if (oldDrawing != newDrawing) {
    if (oldDrawing != null) {
      for (      Figure f : child.preorderIterable()) {
        fireTreeModelEvent(TreeModelEvent.nodeRemovedFromTree((DrawingModel)this,oldDrawing,f));
      }
    }
    if (newDrawing != null) {
      for (      Figure f : child.preorderIterable()) {
        fireTreeModelEvent(TreeModelEvent.nodeAddedToTree((DrawingModel)this,newDrawing,f));
      }
    }
  }
}
