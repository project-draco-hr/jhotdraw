{
  DirtyMask mask=DirtyMask.of(bits);
  if (mask.containsOneOf(DirtyBits.NODE)) {
    fire(DrawingModelEvent.nodeChanged(this,figure));
  }
  if (mask.containsOneOf(DirtyBits.LAYOUT_BOUNDS,DirtyBits.GEOMETRY)) {
    if (figure instanceof ConnectableFigure) {
      ConnectableFigure connectable=(ConnectableFigure)figure;
      for (      ConnectionFigure connection : connectable.connections()) {
        fire(DrawingModelEvent.nodeChanged(this,connection));
      }
    }
  }
  fireInvalidated();
}
