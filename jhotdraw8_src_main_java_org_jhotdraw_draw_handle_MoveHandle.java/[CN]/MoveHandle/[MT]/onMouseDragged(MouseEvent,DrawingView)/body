{
  Point2D newPoint=view.viewToWorld(new Point2D(event.getX(),event.getY()));
  if (!event.isAltDown() && !event.isControlDown()) {
    newPoint=view.getConstrainer().constrainPoint(getOwner(),newPoint);
  }
  if (event.isMetaDown()) {
    Point2D loc=getLocation();
    oldPoint=getOwner().localToDrawing(loc);
  }
  Transform tx=Transform.translate(newPoint.getX() - oldPoint.getX(),newPoint.getY() - oldPoint.getY());
  if (!tx.isIdentity()) {
    DrawingModel model=view.getModel();
    if (event.isShiftDown()) {
      for (      Figure f : groupReshapeableFigures) {
        tx=f.getWorldToParent().createConcatenation(tx);
        model.reshape(f,tx);
      }
    }
 else {
      tx=getOwner().getWorldToParent().createConcatenation(tx);
      model.reshape(getOwner(),tx);
    }
  }
  oldPoint=newPoint;
}
