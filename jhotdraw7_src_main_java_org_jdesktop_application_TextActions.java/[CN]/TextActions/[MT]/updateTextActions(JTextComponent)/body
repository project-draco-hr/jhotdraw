{
  Caret caret=text.getCaret();
  boolean selection=(caret.getDot() != caret.getMark());
  boolean editable=text.isEditable();
  boolean data=getClipboard().isDataFlavorAvailable(DataFlavor.stringFlavor);
  setCopyEnabled(selection);
  setCutEnabled(editable && selection);
  setDeleteEnabled(editable && selection);
  setPasteEnabled(editable && data);
}
