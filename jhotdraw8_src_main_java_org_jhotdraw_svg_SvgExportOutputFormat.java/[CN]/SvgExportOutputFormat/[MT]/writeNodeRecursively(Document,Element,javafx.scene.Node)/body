{
  parent.appendChild(doc.createTextNode("\n"));
  Element elem=null;
  if (node instanceof Shape) {
    elem=writeShape(doc,parent,(Shape)node);
  }
 else   if (node instanceof Group) {
    elem=writeGroup(doc,parent,(Group)node);
  }
 else   if (node instanceof Region) {
    elem=writeRegion(doc,parent,(Region)node);
  }
 else   if (node instanceof ImageView) {
    elem=writeImageView(doc,parent,(ImageView)node);
  }
 else {
    throw new UnsupportedOperationException("not yet implemented for " + node);
  }
  writeStyleAttributes(elem,node);
  writeTransformAttributes(elem,node);
  writeCompositingAttributes(elem,node);
  if (elem != null && (node instanceof Parent)) {
    Parent pp=(Parent)node;
    for (    javafx.scene.Node child : pp.getChildrenUnmodifiable()) {
      writeNodeRecursively(doc,elem,child);
    }
    if (!pp.getChildrenUnmodifiable().isEmpty()) {
      elem.appendChild(doc.createTextNode("\n"));
    }
  }
}
