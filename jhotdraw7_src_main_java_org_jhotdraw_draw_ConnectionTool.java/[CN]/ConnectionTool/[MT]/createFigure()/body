{
  ConnectionFigure f=(ConnectionFigure)prototype.clone();
  getEditor().applyDefaultAttributesTo(f);
  if (prototypeAttributes != null) {
    for (    Map.Entry<AttributeKey,Object> entry : prototypeAttributes.entrySet()) {
      f.setAttribute((AttributeKey)entry.getKey(),entry.getValue());
    }
  }
  return f;
}
