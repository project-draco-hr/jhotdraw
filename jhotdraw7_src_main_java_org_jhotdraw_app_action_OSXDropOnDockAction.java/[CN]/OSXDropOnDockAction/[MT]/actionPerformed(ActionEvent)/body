{
  final Application app=getApplication();
  if (evt instanceof ApplicationEvent) {
    final ApplicationEvent ae=(ApplicationEvent)evt;
    final View p=app.createView();
    p.setEnabled(false);
    app.add(p);
    app.show(p);
    p.execute(new Worker(){
      public Object construct() throws IOException {
        p.read(ae.getFile().toURI());
        return null;
      }
      @Override protected void done(      Object value){
        p.setURI(ae.getFile().toURI());
        p.setEnabled(true);
      }
      @Override protected void failed(      Throwable value){
        ResourceBundleUtil labels=ResourceBundleUtil.getBundle("org.jhotdraw.app.Labels");
        app.dispose(p);
        JOptionPane.showMessageDialog(null,"<html>" + UIManager.getString("OptionPane.css") + "<b>"+ labels.getFormatted("file.open.couldntOpen.message",ae.getFile().getName())+ "</b><p>"+ value,"",JOptionPane.ERROR_MESSAGE);
      }
    }
);
  }
}
