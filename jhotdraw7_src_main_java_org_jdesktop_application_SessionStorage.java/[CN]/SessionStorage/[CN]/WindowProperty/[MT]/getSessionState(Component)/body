{
  checkComponent(c);
  int frameState=Frame.NORMAL;
  if (c instanceof Frame) {
    frameState=((Frame)c).getExtendedState();
  }
  GraphicsConfiguration gc=c.getGraphicsConfiguration();
  Rectangle gcBounds=(gc == null) ? null : gc.getBounds();
  Rectangle frameBounds=c.getBounds();
  if ((c instanceof JFrame) && (0 != (frameState & Frame.MAXIMIZED_BOTH))) {
    String clientPropertyKey="WindowState.normalBounds";
    Object r=((JFrame)c).getRootPane().getClientProperty(clientPropertyKey);
    if (r instanceof Rectangle) {
      frameBounds=(Rectangle)r;
    }
  }
  return new WindowState(frameBounds,gcBounds,getScreenCount(),frameState);
}
