{
  clearNodes();
  clearSelection();
  drawingPane.getChildren().clear();
  activeLayer.set(null);
  Drawing d=getModel().getRoot();
  drawing.set(d);
  if (d != null) {
    if (drawingImageView != null) {
      drawingPane.getChildren().add(drawingImageView);
    }
 else {
      drawingPane.getChildren().add(getNode(d));
    }
    dirtyFigureNodes.add(d);
    updateLayout();
    handleSubtreeNodesChanged(d);
    repaint();
    for (int i=d.getChildren().size() - 1; i >= 0; i--) {
      Layer layer=(Layer)d.getChild(i);
      if (!layer.isEditable() && layer.isVisible()) {
        activeLayer.set(layer);
        break;
      }
    }
  }
}
