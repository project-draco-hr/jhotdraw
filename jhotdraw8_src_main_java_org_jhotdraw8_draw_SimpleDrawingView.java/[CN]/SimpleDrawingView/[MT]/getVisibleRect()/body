{
  ScrollPane scrollPane=getScrollPane();
  if (scrollPane == null) {
    return getNode().getBoundsInLocal();
  }
  final Bounds viewportBounds=scrollPane.getViewportBounds();
  final Bounds scrollPaneBounds=scrollPane.getBoundsInLocal();
  final Bounds contentPaneBounds=scrollPane.getContent().getBoundsInLocal();
  final double hmin=scrollPane.getHmin();
  final double hmax=scrollPane.getHmax();
  final double hvalue=scrollPane.getHvalue();
  final double contentWidth=contentPaneBounds.getWidth();
  final double viewportWidth=viewportBounds.getWidth();
  final double vmin=scrollPane.getVmin();
  final double vmax=scrollPane.getVmax();
  final double vvalue=scrollPane.getVvalue();
  final double contentHeight=contentPaneBounds.getHeight();
  final double viewportHeight=viewportBounds.getHeight();
  final double hoffset=Math.max(0,contentWidth - viewportWidth) * (hvalue - hmin) / (hmax - hmin);
  final double voffset=Math.max(0,contentHeight - viewportHeight) * (vvalue - vmin) / (vmax - vmin);
  final Bounds rect=new BoundingBox(hoffset,voffset,viewportWidth,viewportHeight);
  return rect;
}
