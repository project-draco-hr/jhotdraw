{
  Set<Figure> oldSelection=new HashSet<Figure>(selectedFigures);
  if (selectedFigures.contains(figure)) {
    selectedFigures.remove(figure);
  }
 else {
    selectedFigures.add(figure);
  }
  Set<Figure> newSelection=new HashSet<Figure>(selectedFigures);
  fireSelectionChanged(oldSelection,newSelection);
  invalidateHandles();
  repaint();
}
