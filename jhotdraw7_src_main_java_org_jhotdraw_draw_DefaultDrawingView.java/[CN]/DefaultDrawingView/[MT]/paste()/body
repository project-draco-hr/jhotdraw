{
  if (drawing.getInputFormats() == null || drawing.getInputFormats().size() == 0) {
    getToolkit().beep();
    return;
  }
  try {
    Transferable transfer=getToolkit().getSystemClipboard().getContents(this);
    ImportLoop:     for (    InputFormat format : drawing.getInputFormats()) {
      for (      DataFlavor flavor : transfer.getTransferDataFlavors()) {
        if (format.isDataFlavorSupported(flavor)) {
          CompositeEdit ce=new CompositeEdit("Paste");
          getDrawing().fireUndoableEditHappened(ce);
          java.util.List<Figure> toBeSelected=format.readFigures(transfer);
          clearSelection();
          getDrawing().addAll(toBeSelected);
          addToSelection(toBeSelected);
          getDrawing().fireUndoableEditHappened(ce);
          break ImportLoop;
        }
      }
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
}
