{
  Class type=field.getType();
  if (type.isArray()) {
    type=type.getComponentType();
    Pattern p=Pattern.compile(key + "\\[([\\d]+)\\]");
    List<String> arrayKeys=new ArrayList<String>();
    for (    String arrayElementKey : keySet()) {
      Matcher m=p.matcher(arrayElementKey);
      if (m.matches()) {
        Object value=getObject(arrayElementKey,type);
        if (!field.isAccessible()) {
          field.setAccessible(true);
        }
        try {
          int index=Integer.parseInt(m.group(1));
          Array.set(field.get(target),index,value);
        }
 catch (        Exception e) {
          String msg="unable to set array element";
          InjectFieldException ife=new InjectFieldException(msg,field,target,key);
          ife.initCause(e);
          throw ife;
        }
      }
    }
  }
 else {
    Object value=getObject(key,type);
    if (value != null) {
      if (!field.isAccessible()) {
        field.setAccessible(true);
      }
      try {
        field.set(target,value);
      }
 catch (      Exception e) {
        String msg="unable to set field's value";
        InjectFieldException ife=new InjectFieldException(msg,field,target,key);
        ife.initCause(e);
        throw ife;
      }
    }
  }
}
