{
  JPanel p=null;
switch (state) {
case 1:
{
      p=new JPanel();
      p.setOpaque(false);
      p.setLayout(new GridBagLayout());
      GridBagConstraints gbc;
      AbstractButton btn;
      p.setBorder(new EmptyBorder(5,5,5,8));
      JLabel linkLabel;
      JScrollPane scrollPane;
      JStringAttributeArea linkField;
      linkLabel=new javax.swing.JLabel();
      linkLabel.setToolTipText(labels.getString("attribute.figureLink.toolTipText"));
      linkLabel.setText(labels.getString("attribute.figureLink.text"));
      linkLabel.setFont(new java.awt.Font("Dialog",0,11));
      scrollPane=new javax.swing.JScrollPane();
      linkField=new org.jhotdraw.gui.JStringAttributeArea();
      linkField.setToolTipText(labels.getString("attribute.figureLink.toolTipText"));
      linkLabel.setLabelFor(linkField);
      gbc=new GridBagConstraints();
      gbc.gridx=0;
      gbc.insets=new Insets(3,0,0,0);
      gbc.anchor=GridBagConstraints.SOUTHWEST;
      p.add(linkLabel,gbc);
      scrollPane.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
      scrollPane.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
      scrollPane.putClientProperty("JComponent.sizeVariant","small");
      linkField.setColumns(8);
      linkField.setLineWrap(true);
      linkField.setRows(3);
      linkField.setWrapStyleWord(true);
      linkField.setFont(new java.awt.Font("DialogInput",0,11));
      linkField.setAttributeKey(LINK);
      linkField.setEditor(editor);
      scrollPane.setViewportView(linkField);
      gbc=new GridBagConstraints();
      gbc.gridx=0;
      gbc.gridy=1;
      gbc.insets=new Insets(3,0,0,0);
      gbc.fill=GridBagConstraints.BOTH;
      gbc.gridwidth=GridBagConstraints.REMAINDER;
      gbc.weightx=1d;
      gbc.weighty=1d;
      p.add(scrollPane,gbc);
      JPopupButton opacityPopupButton=new JPopupButton();
      JDoubleAttributeSlider opacitySlider=new JDoubleAttributeSlider(JSlider.VERTICAL,0,100,100);
      opacityPopupButton.add(opacitySlider);
      labels.configureToolBarButton(opacityPopupButton,"attribute.figureOpacity");
      opacityPopupButton.setUI((PaletteButtonUI)PaletteButtonUI.createUI(opacityPopupButton));
      opacityPopupButton.setIcon(new SelectionOpacityIcon(editor,OPACITY,FILL_COLOR,STROKE_COLOR,getClass().getResource(labels.getString("attribute.figureOpacity.icon")),new Rectangle(5,5,6,6),new Rectangle(4,4,7,7)));
      opacityPopupButton.setPopupAnchor(SOUTH_EAST);
      new SelectionComponentRepainter(editor,opacityPopupButton);
      gbc=new GridBagConstraints();
      gbc.gridx=2;
      gbc.gridy=0;
      gbc.insets=new Insets(0,0,0,0);
      gbc.anchor=GridBagConstraints.EAST;
      p.add(opacityPopupButton,gbc);
      opacitySlider.setUI((SliderUI)PaletteSliderUI.createUI(opacitySlider));
      opacitySlider.setScaleFactor(100d);
      opacitySlider.setAttributeKey(OPACITY);
      opacitySlider.setEditor(editor);
    }
  break;
case 2:
{
  p=new JPanel();
  p.setOpaque(false);
  p.setLayout(new GridBagLayout());
  GridBagConstraints gbc;
  AbstractButton btn;
  p.setBorder(new EmptyBorder(5,5,5,8));
  JLabel linkLabel;
  JScrollPane scrollPane;
  JStringAttributeArea linkField;
  linkLabel=new javax.swing.JLabel();
  scrollPane=new javax.swing.JScrollPane();
  linkField=new org.jhotdraw.gui.JStringAttributeArea();
  linkField.setToolTipText(labels.getString("attribute.figureLink.toolTipText"));
  linkLabel.setFont(new java.awt.Font("Dialog",0,11));
  linkLabel.setLabelFor(linkField);
  linkLabel.setToolTipText(labels.getString("attribute.figureLink.toolTipText"));
  linkLabel.setText(labels.getString("attribute.figureLink.text"));
  gbc=new GridBagConstraints();
  gbc.gridx=0;
  gbc.insets=new Insets(3,0,0,0);
  gbc.anchor=GridBagConstraints.SOUTHWEST;
  p.add(linkLabel,gbc);
  scrollPane.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
  scrollPane.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
  scrollPane.putClientProperty("JComponent.sizeVariant","small");
  linkField.setColumns(12);
  linkField.setLineWrap(true);
  linkField.setRows(3);
  linkField.setWrapStyleWord(true);
  linkField.setFont(new java.awt.Font("DialogInput",0,11));
  linkField.setAttributeKey(LINK);
  linkField.setEditor(editor);
  scrollPane.setViewportView(linkField);
  gbc=new GridBagConstraints();
  gbc.gridx=0;
  gbc.gridy=1;
  gbc.insets=new Insets(3,0,0,0);
  gbc.fill=GridBagConstraints.BOTH;
  gbc.gridwidth=GridBagConstraints.REMAINDER;
  gbc.weightx=1d;
  gbc.weighty=1d;
  p.add(scrollPane,gbc);
  JDoubleAttributeField opacityField=new JDoubleAttributeField();
  opacityField.setColumns(2);
  opacityField.setToolTipText(labels.getString("attribute.figureOpacity.toolTipText"));
  opacityField.setHorizontalAlignment(JDoubleAttributeField.RIGHT);
  opacityField.putClientProperty("Palette.Component.segmentPosition","first");
  opacityField.setUI((PaletteTextFieldUI)PaletteTextFieldUI.createUI(opacityField));
  opacityField.setScaleFactor(100d);
  opacityField.setMinimum(0d);
  opacityField.setMaximum(100d);
  opacityField.setAttributeKey(OPACITY);
  opacityField.setEditor(editor);
  gbc=new GridBagConstraints();
  gbc.gridx=1;
  gbc.gridy=0;
  gbc.insets=new Insets(0,0,0,0);
  gbc.anchor=GridBagConstraints.EAST;
  gbc.weightx=1d;
  p.add(opacityField,gbc);
  JPopupButton opacityPopupButton=new JPopupButton();
  JDoubleAttributeSlider opacitySlider=new JDoubleAttributeSlider(JSlider.VERTICAL,0,100,100);
  opacityPopupButton.add(opacitySlider);
  labels.configureToolBarButton(opacityPopupButton,"attribute.figureOpacity");
  opacityPopupButton.setUI((PaletteButtonUI)PaletteButtonUI.createUI(opacityPopupButton));
  opacityPopupButton.setIcon(new SelectionOpacityIcon(editor,OPACITY,FILL_COLOR,STROKE_COLOR,getClass().getResource(labels.getString("attribute.figureOpacity.icon")),new Rectangle(5,5,6,6),new Rectangle(4,4,7,7)));
  opacityPopupButton.setPopupAnchor(SOUTH_EAST);
  new SelectionComponentRepainter(editor,opacityPopupButton);
  gbc=new GridBagConstraints();
  gbc.gridx=2;
  gbc.gridy=0;
  gbc.insets=new Insets(0,0,0,0);
  p.add(opacityPopupButton,gbc);
  opacitySlider.setUI((SliderUI)PaletteSliderUI.createUI(opacitySlider));
  opacitySlider.setScaleFactor(100d);
  opacitySlider.setAttributeKey(OPACITY);
  opacitySlider.setEditor(editor);
}
break;
}
return p;
}
