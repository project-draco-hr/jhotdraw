{
  final Application app=getApplication();
  if (app.isEnabled()) {
    app.setEnabled(false);
    View emptyView=app.getActiveView();
    if (emptyView == null || emptyView.getFile() != null || emptyView.hasUnsavedChanges()) {
      emptyView=null;
    }
    final View view;
    boolean removeMe;
    if (emptyView == null) {
      view=app.createView();
      app.add(view);
      removeMe=true;
    }
 else {
      view=emptyView;
      removeMe=false;
    }
    JFileChooser fileChooser=getFileChooser(view);
    if (fileChooser.showOpenDialog(app.getComponent()) == JFileChooser.APPROVE_OPTION) {
      app.show(view);
      openFile(fileChooser,view);
    }
 else {
      if (removeMe) {
        app.remove(view);
      }
      app.setEnabled(true);
    }
  }
}
