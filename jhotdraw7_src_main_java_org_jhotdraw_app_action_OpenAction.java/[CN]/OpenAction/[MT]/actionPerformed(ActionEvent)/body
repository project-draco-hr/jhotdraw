{
  final DocumentOrientedApplication application=getApplication();
  if (application.isEnabled()) {
    application.setEnabled(false);
    DocumentView emptyProject=application.getCurrentView();
    if (emptyProject == null || emptyProject.getFile() != null || emptyProject.isModified()) {
      emptyProject=null;
    }
    final DocumentView p;
    boolean removeMe;
    boolean removeMe;
    if (emptyProject == null) {
      p=application.createView();
      application.add(p);
      removeMe=true;
      removeMe=true;
    }
 else {
      p=emptyProject;
      removeMe=false;
    }
    JFileChooser fileChooser=p.getOpenChooser();
    if (fileChooser.showOpenDialog(application.getComponent()) == JFileChooser.APPROVE_OPTION) {
      application.show(p);
      openFile(fileChooser,p);
    }
 else {
      if (removeMe) {
        application.remove(p);
      }
      application.setEnabled(true);
    }
  }
}
