{
  final Application app=getApplication();
  if (value == null) {
    view.setFile(file);
    view.setEnabled(true);
    Frame w=(Frame)SwingUtilities.getWindowAncestor(view.getComponent());
    if (w != null) {
      w.setExtendedState(w.getExtendedState() & ~Frame.ICONIFIED);
      w.toFront();
    }
    view.getComponent().requestFocus();
    app.addRecentFile(file);
    app.setEnabled(true);
  }
 else {
    view.setEnabled(true);
    app.setEnabled(true);
    String message;
    if ((value instanceof Throwable) && ((Throwable)value).getMessage() != null) {
      message=((Throwable)value).getMessage();
      ((Throwable)value).printStackTrace();
    }
 else     if ((value instanceof Throwable)) {
      message=value.toString();
      ((Throwable)value).printStackTrace();
    }
 else {
      message=value.toString();
    }
    ResourceBundleUtil labels=ResourceBundleUtil.getBundle("org.jhotdraw.app.Labels");
    JSheet.showMessageSheet(view.getComponent(),"<html>" + UIManager.getString("OptionPane.css") + "<b>"+ labels.getFormatted("couldntOpen",file.getName())+ "</b><br>"+ ((message == null) ? "" : message),JOptionPane.ERROR_MESSAGE);
  }
}
