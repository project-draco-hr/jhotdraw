{
  DrawingView v=getView();
  Point pos=new Point(evt.getX(),evt.getY());
  Handle handle=v.findHandle(pos);
  if (handle != null) {
    handle.trackDoubleClick(pos,evt.getModifiersEx());
  }
 else {
    Point2D.Double p=viewToDrawing(pos);
    Figure outerFigure=getView().findFigure(pos);
    Figure figure=outerFigure;
    if (figure != null) {
      Tool figureTool=figure.getTool(p);
      if (figureTool == null) {
        figure=getDrawing().findFigureInside(p);
        if (figure != null) {
          figureTool=figure.getTool(p);
        }
      }
      if (figureTool != null) {
        setTracker(figureTool);
        figureTool.mousePressed(evt);
      }
 else {
        if (outerFigure.handleMouseClick(p,evt,getView())) {
          v.clearSelection();
          v.addToSelection(outerFigure);
        }
 else {
          v.clearSelection();
          v.addToSelection(outerFigure);
          v.setHandleDetailLevel(v.getHandleDetailLevel() + 1);
        }
      }
    }
  }
}
