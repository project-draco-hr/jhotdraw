{
  ResourceBundleUtil labels=ResourceBundleUtil.getLAFBundle("org.jhotdraw.draw.Labels");
  DataInputStream in=null;
  byte[] buf=null;
  BufferedImage img=null;
  try {
    in=new DataInputStream(new FileInputStream(file));
    buf=new byte[(int)file.length()];
    in.readFully(buf);
    img=ImageIO.read(new ByteArrayInputStream(buf));
  }
 catch (  Throwable t) {
    IOException ex=new IOException(labels.getFormatted("failedToLoadImage",file.getName()));
    ex.initCause(t);
    throw ex;
  }
  if (img == null) {
    throw new IOException(labels.getFormatted("failedToLoadImage",file.getName()));
  }
  imageData=buf;
  bufferedImage=img;
}
