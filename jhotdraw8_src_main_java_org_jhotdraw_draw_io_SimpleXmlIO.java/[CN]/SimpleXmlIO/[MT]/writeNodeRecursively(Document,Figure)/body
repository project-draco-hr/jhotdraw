{
  Element elem=createElement(doc,factory.figureToName(figure));
  writeElementAttributes(elem,figure);
  for (  Figure child : figure.childrenProperty()) {
    if (factory.figureToName(child) != null) {
      elem.appendChild(doc.createTextNode("\n"));
      elem.appendChild(writeNodeRecursively(doc,child));
    }
  }
  if (!figure.childrenProperty().isEmpty()) {
    elem.appendChild(doc.createTextNode("\n"));
  }
  return elem;
}
