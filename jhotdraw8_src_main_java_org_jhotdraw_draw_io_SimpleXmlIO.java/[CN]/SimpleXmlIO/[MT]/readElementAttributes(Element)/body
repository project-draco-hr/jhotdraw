{
  Figure figure=null;
  String id=elem.getAttribute("id");
  if (id != null) {
    figure=getFigure(id);
  }
  if (figure != null) {
    NamedNodeMap attrs=elem.getAttributes();
    for (int i=0, n=attrs.getLength(); i < n; i++) {
      Attr attr=(Attr)attrs.item(i);
      if ("id".equals(attr.getName())) {
        continue;
      }
      Key<Object> key=(Key<Object>)factory.nameToKey(figure,attr.getName());
      if (key != null && factory.figureKeys(figure).contains(key)) {
        Object value=null;
        if (Figure.class.isAssignableFrom(key.getValueType())) {
          value=getFigure(attr.getValue());
        }
 else {
          value=factory.stringToValue(key,attr.getValue());
        }
        figure.set(key,value);
      }
    }
  }
}
