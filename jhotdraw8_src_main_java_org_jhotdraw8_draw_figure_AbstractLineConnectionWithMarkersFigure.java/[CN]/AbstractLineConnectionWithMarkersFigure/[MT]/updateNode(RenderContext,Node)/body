{
  javafx.scene.Group g=(javafx.scene.Group)node;
  Line lineNode=(Line)g.getProperties().get("line");
  final SVGPath startMarkerNode=(SVGPath)g.getProperties().get("startMarker");
  final SVGPath endMarkerNode=(SVGPath)g.getProperties().get("endMarker");
  Point2D start=get(START);
  Point2D end=get(END);
  final double startInset=getStyled(MARKER_LINE_INSET_START);
  final double endInset=getStyled(MARKER_LINE_INSET_END);
  final String startMarkerStr=getStyled(MARKER_START_SHAPE);
  updateMarkerNode(ctx,g,startMarkerNode,start,end,startMarkerStr,getStyled(MARKER_SCALE_FACTOR_START));
  final String endMarkerStr=getStyled(MARKER_END_SHAPE);
  updateMarkerNode(ctx,g,endMarkerNode,end,start,endMarkerStr,getStyled(MARKER_SCALE_FACTOR_END));
  Point2D dir=end.subtract(start).normalize();
  if (startInset != 0 && startMarkerStr != null) {
    start=start.add(dir.multiply(startInset * getStyled(MARKER_SCALE_FACTOR_START)));
  }
  if (endInset != 0 && endMarkerStr != null) {
    end=end.add(dir.multiply(-endInset * getStyled(MARKER_SCALE_FACTOR_END)));
  }
  lineNode.setStartX(start.getX());
  lineNode.setStartY(start.getY());
  lineNode.setEndX(end.getX());
  lineNode.setEndY(end.getY());
  updateLineNode(ctx,lineNode);
  updateStartMarkerNode(ctx,startMarkerNode);
  updateEndMarkerNode(ctx,endMarkerNode);
}
