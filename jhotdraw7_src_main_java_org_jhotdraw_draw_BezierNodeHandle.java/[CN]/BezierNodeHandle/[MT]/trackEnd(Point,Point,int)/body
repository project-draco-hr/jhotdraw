{
  BezierFigure f=getBezierFigure();
  if ((modifiersEx & (InputEvent.META_DOWN_MASK | InputEvent.CTRL_DOWN_MASK)) != 0 && (modifiersEx & InputEvent.BUTTON2_DOWN_MASK) == 0) {
    f.willChange();
    BezierPath.Node v=f.getNode(index);
    if (index > 0 && index < f.getNodeCount() || f.isClosed()) {
      v.mask=(v.mask + 3) % 4;
    }
 else     if (index == 0) {
      v.mask=((v.mask & BezierPath.C2_MASK) == 0) ? BezierPath.C2_MASK : 0;
    }
 else {
      v.mask=((v.mask & BezierPath.C1_MASK) == 0) ? BezierPath.C1_MASK : 0;
    }
    f.basicSetNode(index,v);
    f.changed();
    fireHandleRequestSecondaryHandles();
  }
  view.getDrawing().fireUndoableEditHappened(new BezierNodeEdit(f,index,oldNode,f.getNode(index)));
  view.getDrawing().fireUndoableEditHappened(edit);
}
