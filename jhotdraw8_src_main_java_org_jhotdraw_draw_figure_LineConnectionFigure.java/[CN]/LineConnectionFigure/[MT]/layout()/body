{
  Point2D start=get(START);
  Point2D end=get(END);
  Connector startConnector=get(START_CONNECTOR);
  Connector endConnector=get(END_CONNECTOR);
  Figure startTarget=get(START_TARGET);
  Figure endTarget=get(END_TARGET);
  if (startConnector != null && startTarget != null) {
    start=startConnector.getPositionInWorld(this,startTarget);
  }
  if (endConnector != null && endTarget != null) {
    end=endConnector.getPositionInWorld(this,endTarget);
  }
  if (startConnector != null && startTarget != null) {
    set(START,worldToParent(startConnector.chopStart(this,startTarget,start,end)));
  }
  if (endConnector != null && endTarget != null) {
    set(END,worldToParent(endConnector.chopEnd(this,endTarget,start,end)));
  }
}
