{
  final Connector oldEnd=endConnector;
  if (newEnd != oldEnd) {
    willChange();
    basicSetEndConnector(newEnd);
    fireUndoableEditHappened(new AbstractUndoableEdit(){
      public String getPresentationName(){
        return ResourceBundleUtil.getLAFBundle("org.jhotdraw.draw.Labels").getString("ConnectionFigure.undoConnect");
      }
      public void undo() throws CannotUndoException {
        super.undo();
        willChange();
        basicSetEndConnector(oldEnd);
        changed();
      }
      public void redo() throws CannotUndoException {
        super.redo();
        willChange();
        basicSetEndConnector(newEnd);
        changed();
      }
    }
);
    changed();
  }
}
