{
  Rectangle2D.Double r=null;
  for (  Figure f : getView().getSelectedFigures()) {
    if (r == null) {
      r=f.getBounds();
    }
 else {
      r.add(f.getBounds());
    }
  }
  Point2D.Double p0=new Point2D.Double(r.x,r.y);
  if (getView().getConstrainer() != null) {
    getView().getConstrainer().translateRectangle(r,dir);
  }
 else {
switch (dir) {
case NORTH:
      r.y-=1;
    break;
case SOUTH:
  r.y+=1;
break;
case WEST:
r.x-=1;
break;
case EAST:
r.x+=1;
break;
}
}
AffineTransform tx=new AffineTransform();
tx.translate(r.x - p0.x,r.y - p0.y);
for (Figure f : getView().getSelectedFigures()) {
if (f.isTransformable()) {
f.willChange();
f.transform(tx);
f.changed();
}
}
CompositeEdit edit;
fireUndoableEditHappened(new TransformEdit(getView().getSelectedFigures(),tx));
}
