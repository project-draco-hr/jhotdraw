{
  validateHandles();
  HashSet<Figure> result=new HashSet<>();
  for (  Map.Entry<Figure,List<Handle>> entry : handles.entrySet()) {
    if (figures.contains(entry.getKey())) {
      for (      Handle h : entry.getValue()) {
        if (h.isCompatible(master)) {
          result.add(entry.getKey());
          break;
        }
      }
    }
  }
  return result;
}
