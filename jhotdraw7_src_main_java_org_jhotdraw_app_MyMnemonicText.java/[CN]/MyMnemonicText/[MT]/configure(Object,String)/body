{
  String text=markedText;
  int mnemonicIndex=-1;
  int mnemonicKey=KeyEvent.VK_UNDEFINED;
  int markerIndex=mnemonicMarkerIndex(markedText,'&');
  if (markerIndex == -1) {
    markerIndex=mnemonicMarkerIndex(markedText,'_');
  }
  if (markerIndex != -1) {
    text=text.substring(0,markerIndex) + text.substring(markerIndex + 1);
    mnemonicIndex=markerIndex;
    CharacterIterator sci=new StringCharacterIterator(markedText,markerIndex);
    mnemonicKey=mnemonicKey(sci.next());
  }
  if (target instanceof javax.swing.Action) {
    configureAction((javax.swing.Action)target,text,mnemonicKey,mnemonicIndex);
  }
 else   if (target instanceof AbstractButton) {
    configureButton((AbstractButton)target,text,mnemonicKey,mnemonicIndex);
  }
 else   if (target instanceof JLabel) {
    configureLabel((JLabel)target,text,mnemonicKey,mnemonicIndex);
  }
 else {
    throw new IllegalArgumentException("unrecognized target type " + target);
  }
}
