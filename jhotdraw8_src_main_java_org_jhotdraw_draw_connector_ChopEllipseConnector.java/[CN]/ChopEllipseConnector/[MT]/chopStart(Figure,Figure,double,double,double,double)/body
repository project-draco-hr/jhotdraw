{
  Bounds bounds=target.getBoundsInLocal();
  Rectangle2D r=new Rectangle2D(bounds.getMinX(),bounds.getMinY(),bounds.getWidth(),bounds.getHeight());
  if (target.getStyled(STROKE) != null) {
    double grow;
switch (target.getStyled(STROKE_TYPE)) {
case CENTERED:
default :
      grow=target.getStyled(STROKE_WIDTH) / 2d;
    break;
case OUTSIDE:
  grow=target.getStyled(STROKE_WIDTH);
break;
case INSIDE:
grow=0d;
break;
}
r=Geom.grow(r,grow,grow);
}
double angle=Geom.pointToAngle(r,new Point2D(endX,endY));
return target.localToDrawing(Geom.ovalAngleToPoint(r,angle));
}
