{
  if (colorChooser == null) {
    colorChooser=new JColorChooser();
  }
  Color initialColor=getInitialColor();
  Color chosenColor=colorChooser.showDialog((Component)e.getSource(),labels.getString("attribute.color.text"),initialColor);
  if (chosenColor != null) {
    HashMap<AttributeKey,Object> attr=new HashMap<AttributeKey,Object>(attributes);
    attr.put(key,chosenColor);
    applyAttributesTo(attr,getView().getSelectedFigures());
  }
}
