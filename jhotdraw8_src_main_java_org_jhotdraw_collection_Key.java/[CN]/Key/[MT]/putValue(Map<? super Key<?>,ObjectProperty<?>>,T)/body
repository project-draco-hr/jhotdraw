{
  if (!isAssignable(value)) {
    throw new IllegalArgumentException("Value is not assignable to key. key=" + this + ", value="+ value);
  }
  if (a.containsKey(this)) {
    ObjectProperty<T> p=(ObjectProperty<T>)a.get(this);
    T oldValue=p.get();
    p.set(value);
    return oldValue;
  }
 else {
    a.put(this,new SimpleObjectProperty<>(value));
    return null;
  }
}
