{
  if (text != null && text.length() > 0) {
    InputStream in=null;
    try {
      Object result=null;
      Drawing drawing=createDrawing();
      for (      InputFormat fmt : drawing.getInputFormats()) {
        try {
          fmt.read(in,drawing,true);
          in=new ByteArrayInputStream(text.getBytes("UTF8"));
          result=drawing;
          break;
        }
 catch (        IOException e) {
          result=e;
        }
      }
      if (result instanceof IOException) {
        throw (IOException)result;
      }
      setDrawing(drawing);
    }
 catch (    Throwable e) {
      getDrawing().removeAllChildren();
      SVGTextFigure tf=new SVGTextFigure();
      tf.setText(e.getMessage());
      tf.setBounds(new Point2D.Double(10,10),new Point2D.Double(100,100));
      getDrawing().add(tf);
      e.printStackTrace();
    }
 finally {
      if (in != null) {
        try {
          in.close();
        }
 catch (        IOException ex) {
          ex.printStackTrace();
        }
      }
    }
  }
}
