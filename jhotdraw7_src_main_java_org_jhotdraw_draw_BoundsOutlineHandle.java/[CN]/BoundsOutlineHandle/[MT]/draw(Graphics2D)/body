{
  Shape bounds=getOwner().getBounds();
  if (AttributeKeys.TRANSFORM.get(getOwner()) != null) {
    bounds=AttributeKeys.TRANSFORM.get(getOwner()).createTransformedShape(bounds);
  }
  bounds=view.getDrawingToViewTransform().createTransformedShape(bounds);
  Stroke stroke;
  Color strokeColor;
  if (isTransformHandle) {
    stroke=(Stroke)getEditor().getHandleAttribute(HandleAttributeKeys.TRANSFORM_OUTLINE_HANDLE_STROKE_1);
    strokeColor=(Color)getEditor().getHandleAttribute(HandleAttributeKeys.TRANSFORM_OUTLINE_HANDLE_STROKE_COLOR_1);
  }
 else {
    stroke=(Stroke)getEditor().getHandleAttribute(HandleAttributeKeys.RESIZE_OUTLINE_HANDLE_STROKE_1);
    strokeColor=(Color)getEditor().getHandleAttribute(HandleAttributeKeys.RESIZE_OUTLINE_HANDLE_STROKE_COLOR_1);
  }
  if (stroke != null && strokeColor != null) {
    g.setStroke(stroke);
    g.setColor(strokeColor);
    g.draw(bounds);
  }
  if (isTransformHandle) {
    stroke=(Stroke)getEditor().getHandleAttribute(HandleAttributeKeys.TRANSFORM_OUTLINE_HANDLE_STROKE_2);
    strokeColor=(Color)getEditor().getHandleAttribute(HandleAttributeKeys.TRANSFORM_OUTLINE_HANDLE_STROKE_COLOR_2);
  }
 else {
    stroke=(Stroke)getEditor().getHandleAttribute(HandleAttributeKeys.RESIZE_OUTLINE_HANDLE_STROKE_2);
    strokeColor=(Color)getEditor().getHandleAttribute(HandleAttributeKeys.RESIZE_OUTLINE_HANDLE_STROKE_COLOR_2);
  }
  if (stroke != null && strokeColor != null) {
    g.setStroke(stroke);
    g.setColor(strokeColor);
    g.draw(bounds);
  }
}
