{
  File f=new File(uri);
  OutputFormat format=fileFilterOutputFormatMap.get(filter);
  if (!f.getName().endsWith("." + format.getFileExtension())) {
    f=new File(f.getPath() + "." + format.getFileExtension());
  }
  format.write(f,view.getDrawing());
  preferences.put("viewExportFile",f.getPath());
  preferences.put("viewExportFormat",filter.getDescription());
}
