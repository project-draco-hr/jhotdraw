{
  LinkedList<JToolBar> toolBars=new LinkedList<JToolBar>(getModel().createToolBars(this,null));
  JToolBar stb=new JToolBar();
  stb.setName(labels.getString("standardToolBarTitle"));
  addStandardActionsTo(stb);
  toolBars.addFirst(stb);
  int i=0;
  int x=0;
  for (  JToolBar tb : toolBars) {
    i++;
    tb.setFloatable(false);
    tb.setOrientation(JToolBar.VERTICAL);
    tb.setFocusable(false);
    JFrame d=new JFrame();
    d.setFocusable(false);
    d.setResizable(false);
    d.getContentPane().setLayout(new BorderLayout());
    d.getContentPane().add(tb,BorderLayout.CENTER);
    d.setAlwaysOnTop(true);
    d.setUndecorated(true);
    d.getRootPane().setWindowDecorationStyle(JRootPane.FRAME);
    d.getRootPane().setFont(new Font("Lucida Grande",Font.PLAIN,11));
    d.getRootPane().putClientProperty("Quaqua.RootPane.isVertical",Boolean.FALSE);
    d.getRootPane().putClientProperty("Quaqua.RootPane.isPalette",Boolean.TRUE);
    d.setJMenuBar(createMenuBar(null));
    d.pack();
    d.setFocusableWindowState(false);
    PreferencesUtil.installPalettePrefsHandler(prefs,"toolbar." + i,d,x);
    x+=d.getWidth();
    paletteActions.add(new OSXTogglePaletteAction(this,d,tb.getName()));
    addPalette(d);
  }
}
