{
  ResourceBundleUtil labels=ResourceBundleUtil.getLAFBundle("org.jhotdraw.draw.Labels");
  initComponents();
  undoManager=new UndoRedoManager();
  editor=new DefaultDrawingEditor();
  editor.add(view);
  scrollPane.getViewport().setScrollMode(JViewport.BACKINGSTORE_SCROLL_MODE);
  addCreationButtonsTo(creationToolbar,editor);
  ButtonFactory.addAttributesButtonsTo(attributesToolbar,editor);
  JPopupButton pb=new JPopupButton();
  pb.setItemFont(UIManager.getFont("MenuItem.font"));
  labels.configureToolBarButton(pb,"actions");
  pb.add(new DuplicateAction());
  pb.addSeparator();
  pb.add(new GroupAction(editor));
  pb.add(new UngroupAction(editor));
  pb.addSeparator();
  pb.add(new MoveToFrontAction(editor));
  pb.add(new MoveToBackAction(editor));
  pb.addSeparator();
  pb.add(new CutAction());
  pb.add(new CopyAction());
  pb.add(new PasteAction());
  pb.add(new SelectAllAction());
  pb.add(new SelectSameAction(editor));
  pb.addSeparator();
  pb.add(undoManager.getUndoAction());
  pb.add(undoManager.getRedoAction());
  JMenu m=new JMenu(labels.getString("zoom"));
  JRadioButtonMenuItem rbmi;
  ButtonGroup group=new ButtonGroup();
  for (  double factor : new double[]{0.1,0.25,0.5,0.75,1.0,1.25,1.5,2,3,4}) {
    m.add(rbmi=new JRadioButtonMenuItem(new ZoomAction(editor,factor,null)));
    group.add(rbmi);
    if (factor == 1.0) {
      rbmi.setSelected(true);
    }
  }
  pb.add(m);
  pb.setFocusable(false);
  creationToolbar.addSeparator();
  creationToolbar.add(pb);
  DefaultDrawing drawing=new DefaultDrawing();
  view.setDrawing(drawing);
  drawing.addUndoableEditListener(undoManager);
}
