{
  if (updatingDepth++ == 0) {
    if (format != null) {
      if (!isFocusOwner()) {
        String text=format.format(value);
        if (text.endsWith(".0")) {
          text=text.substring(0,text.length() - 2);
        }
        setText(text);
      }
    }
  }
  updatingDepth--;
}
