{
  ApplicationModel model=getModel();
  ResourceBundleUtil labels=ResourceBundleUtil.getBundle("org.jhotdraw.app.Labels");
  JMenuBar mb=new JMenuBar();
  JMenu m;
  JMenuItem mi;
  JMenu openRecentMenu;
  m=new JMenu();
  labels.configureMenu(m,"file");
  m.add(model.getAction(ClearAction.ID));
  m.add(model.getAction(NewAction.ID));
  m.add(model.getAction(LoadAction.ID));
  if (model.getAction(LoadDirectoryAction.ID) != null) {
    m.add(model.getAction(LoadDirectoryAction.ID));
  }
  openRecentMenu=new JMenu();
  labels.configureMenu(openRecentMenu,"file.openRecent");
  openRecentMenu.add(model.getAction(ClearRecentFilesAction.ID));
  m.add(openRecentMenu);
  m.addSeparator();
  m.add(model.getAction(SaveAction.ID));
  m.add(model.getAction(SaveAsAction.ID));
  if (model.getAction(ExportAction.ID) != null) {
    mi=m.add(model.getAction(ExportAction.ID));
  }
  if (model.getAction(PrintAction.ID) != null) {
    m.addSeparator();
    m.add(model.getAction(PrintAction.ID));
  }
  m.addSeparator();
  m.add(model.getAction(ExitAction.ID));
  mb.add(m);
  addPropertyChangeListener(new OpenRecentMenuHandler(openRecentMenu));
  return m;
}
