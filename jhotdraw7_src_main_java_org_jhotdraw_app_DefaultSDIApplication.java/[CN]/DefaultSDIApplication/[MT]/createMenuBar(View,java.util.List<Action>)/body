{
  JMenuBar mb=new JMenuBar();
  mb.add(createFileMenu(p));
  JMenu editMenu=null;
  JMenu viewMenu=null;
  JMenu helpMenu=null;
  String editMenuText=labels.getString("edit.text");
  String viewMenuText=labels.getString("view.text");
  String helpMenuText=labels.getString("help.text");
  for (  JMenu mm : getModel().createMenus(this,null)) {
    if (mm.getText().equals(editMenuText)) {
      editMenu=mm;
    }
 else     if (mm.getText().equals(viewMenuText)) {
      viewMenu=mm;
    }
 else     if (mm.getText().equals(helpMenuText)) {
      helpMenu=mm;
      continue;
    }
    mb.add(mm);
  }
  if (editMenu == null) {
    JMenu m=createEditMenu();
    if (m != null) {
      mb.add(m,1);
    }
  }
 else {
    JMenu m=createEditMenu();
    if (m != null) {
      editMenu.addSeparator();
      for (      Component c : m.getPopupMenu().getComponents()) {
        editMenu.add(c);
      }
    }
  }
  if (viewMenu == null) {
    viewMenu=createViewMenu(p,toolBarActions);
    if (viewMenu != null) {
      mb.add(viewMenu,1);
    }
  }
 else {
    JMenu m=createViewMenu(p,toolBarActions);
    if (m != null) {
      viewMenu.addSeparator();
      for (      Component c : m.getPopupMenu().getComponents()) {
        viewMenu.add(c);
      }
    }
  }
  if (helpMenu == null) {
    helpMenu=createHelpMenu(p);
    if (helpMenu != null) {
      mb.add(helpMenu);
    }
  }
 else {
    JMenu m=createHelpMenu(p);
    if (m != null) {
      helpMenu.addSeparator();
      for (      Component c : m.getPopupMenu().getComponents()) {
        helpMenu.add(c);
      }
    }
    mb.add(helpMenu);
  }
  return mb;
}
