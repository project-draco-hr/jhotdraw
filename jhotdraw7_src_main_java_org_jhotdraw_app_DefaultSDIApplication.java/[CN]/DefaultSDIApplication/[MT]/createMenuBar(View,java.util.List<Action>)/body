{
  JMenuBar mb=new JMenuBar();
  mb.add(createFileMenu(p));
  JMenu lastMenu=null;
  for (  JMenu mm : getModel().createMenus(this,p)) {
    mb.add(mm);
    lastMenu=mm;
  }
  JMenu viewMenu=createViewMenu(p,toolBarActions);
  if (viewMenu != null) {
    if (lastMenu != null && lastMenu.getText().equals(viewMenu.getText())) {
      for (      Component c : lastMenu.getMenuComponents()) {
        viewMenu.add(c);
      }
      mb.remove(lastMenu);
    }
    mb.add(viewMenu);
  }
  mb.add(createHelpMenu(p));
  return mb;
}
