{
  CssTokenizer tt=new CssTokenizer(new StringReader(in.toString()));
  StringBuilder find=new StringBuilder();
  StringBuilder replace=new StringBuilder();
  tt.skipWhitespace();
  if (tt.nextToken() != '/') {
    throw new ParseException("first / expected",tt.getPosition());
  }
  while (tt.nextToken() != CssTokenizer.TT_EOF && tt.currentToken() != '/') {
switch (tt.currentToken()) {
case CssTokenizer.TT_AT_KEYWORD:
      find.append('@');
    find.append(tt.currentStringValue());
  break;
case CssTokenizer.TT_HASH:
find.append('#');
find.append(tt.currentStringValue());
break;
default :
find.append(tt.currentStringValue());
break;
}
}
if (tt.currentToken() != '/') {
throw new ParseException("second / expected",tt.getPosition());
}
while (tt.nextToken() != CssTokenizer.TT_EOF && tt.currentToken() != '/') {
replace.append(tt.currentStringValue());
}
if (tt.currentToken() != '/') {
throw new ParseException("third / expected",tt.getPosition());
}
tt.skipWhitespace();
in.position(in.limit());
return new Regex(find.toString(),replace.toString());
}
