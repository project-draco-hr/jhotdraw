{
  Figure o=getOwner();
  mouse=new Point2D(event.getX(),event.getY());
{
    Point2D newPoint=startTransform.transform(mouse);
    double deltaRotate=90 + 180.0 / Math.PI * Geom.angle(center.getX(),center.getY(),newPoint.getX(),newPoint.getY());
    double newRotate=deltaRotate;
    newRotate=newRotate % 360;
    if (newRotate < 0) {
      newRotate+=360;
    }
    if (!event.isAltDown() && !event.isControlDown()) {
      newRotate=view.getConstrainer().constrainAngle(getOwner(),newRotate);
    }
    if (event.isMetaDown()) {
    }
    DrawingModel model=view.getModel();
    if (event.isShiftDown()) {
      for (      Figure f : groupReshapeableFigures) {
        if (f instanceof TransformableFigure) {
          model.set(f,TransformableFigure.ROTATE,newRotate);
        }
      }
    }
 else {
      model.set(getOwner(),TransformableFigure.ROTATE,newRotate);
    }
  }
}
