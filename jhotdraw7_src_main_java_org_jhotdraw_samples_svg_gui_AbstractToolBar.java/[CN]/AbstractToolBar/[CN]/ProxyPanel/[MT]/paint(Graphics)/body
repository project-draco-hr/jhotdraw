{
  super.paint(g);
  final int state=getDisclosureState();
  if (runner == null) {
    runner=new Runnable(){
      public void run(){
        panels[state]=createDisclosedComponent(state);
        JComponent parent=(JComponent)getParent();
        if (getDisclosureState() == state && parent != null) {
          GridBagLayout layout=(GridBagLayout)parent.getLayout();
          GridBagConstraints gbc=layout.getConstraints(ProxyPanel.this);
          parent.remove(ProxyPanel.this);
          if (panels[state] != null) {
            parent.add(panels[state],gbc);
          }
          parent.revalidate();
          ((JComponent)parent.getRootPane().getContentPane()).revalidate();
        }
      }
    }
;
    SwingUtilities.invokeLater(runner);
  }
}
