{
  mouseDragged=false;
  Bounds b=getNode().getBoundsInParent();
  Drawing drawing=view.getDrawing();
  double vx=evt.getX();
  double vy=evt.getY();
  Handle h=view.findHandle(vx,vy);
  if (h != null) {
    setTracker(getHandleTracker(h));
  }
 else {
    pressedFigure=view.findFigure(vx,vy);
    if (pressedFigure == null && tolerance != 0) {
      List<Figure> fs=view.findFiguresIntersecting(vx - tolerance,vy - tolerance,tolerance * 2,tolerance * 2,false);
      if (!fs.isEmpty()) {
        pressedFigure=fs.get(0);
      }
    }
    if (isSelectBehindEnabled() && (evt.isAltDown())) {
      pressedFigure=null;
      boolean selectionFound=false;
      for (      Figure f : view.findFigures(vx,vy,false)) {
        if (view.selectionProperty().contains(f)) {
          selectionFound=true;
        }
        if (selectionFound) {
          pressedFigure=f;
          break;
        }
      }
    }
    if (evt.isShiftDown() && !evt.isMetaDown()) {
      if (pressedFigure != null) {
        view.getSelectedFigures().add(pressedFigure);
      }
    }
 else     if (!evt.isShiftDown() && evt.isMetaDown()) {
      if (pressedFigure != null) {
        if (view.selectionProperty().contains(pressedFigure)) {
          view.selectionProperty().remove(pressedFigure);
        }
 else {
          view.selectionProperty().add(pressedFigure);
        }
      }
    }
 else     if (!evt.isShiftDown() && !evt.isMetaDown()) {
      if (pressedFigure != null && !view.selectionProperty().contains(pressedFigure)) {
        view.selectionProperty().clear();
        view.selectionProperty().add(pressedFigure);
      }
    }
    if (pressedFigure != null && (!(evt.isControlDown()) || view.selectionProperty().contains(pressedFigure))) {
      DragTracker t=getDragTracker(pressedFigure,view);
      setTracker(t);
    }
 else {
      SelectAreaTracker t=getSelectAreaTracker();
      setTracker(t);
    }
  }
  if (tracker != null) {
    tracker.trackMousePressed(evt,view);
  }
  fireToolStarted();
}
